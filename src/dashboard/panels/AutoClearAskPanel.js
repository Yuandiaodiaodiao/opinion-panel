const PanelBase = require('../PanelBase');

/**
 * è‡ªåŠ¨æ¸…ç†è¯¢é—®é¢æ¿
 * è¯¢é—®æ˜¯å¦å¯ç”¨è‡ªåŠ¨åº“å­˜æ¸…ç†
 */
class AutoClearAskPanel extends PanelBase {
  constructor(dashboard) {
    super(dashboard);
  }

  isVisible(context) {
    return context.interactionMode === 'askAutoClear';
  }

  render(context) {
    const { submitMessage } = context;
    const lines = [];

    lines.push('');
    lines.push('â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');
    lines.push('â”‚                              ğŸ¤– å¯ç”¨è‡ªåŠ¨åº“å­˜æ¸…ç†ï¼Ÿ                                â”‚');
    lines.push('â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤');
    lines.push('â”‚'.padEnd(84) + 'â”‚');
    lines.push('â”‚  è®¢å•æˆäº¤åï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æŒ‚åå‘æ¸…ç†å•ï¼š'.padEnd(84) + 'â”‚');
    lines.push('â”‚  â€¢ æ ¹æ®ç›˜å£ç‚¹å·®æ™ºèƒ½å®šä»·ï¼ˆä¿è¯ä¸äºæœ¬ï¼‰'.padEnd(84) + 'â”‚');
    lines.push('â”‚  â€¢ é¿å…å¸‚ä»·æˆäº¤ï¼ˆä¸äº§ç”Ÿæ‰‹ç»­è´¹ï¼‰'.padEnd(84) + 'â”‚');
    lines.push('â”‚  â€¢ è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¸…ç†ä»·æ ¼'.padEnd(84) + 'â”‚');
    lines.push('â”‚'.padEnd(84) + 'â”‚');
    lines.push('â”‚  [Y] å¯ç”¨è‡ªåŠ¨æ¸…ç†  |  [N] è·³è¿‡  |  [ESC] å–æ¶ˆ'.padEnd(84) + 'â”‚');
    lines.push('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');

    if (submitMessage) {
      lines.push('');
      lines.push(`  ${submitMessage}`);
    }

    return { lines, width: 84 };
  }

  buildGridItems(context) {
    // è‡ªåŠ¨æ¸…ç†è¯¢é—®é¢æ¿ä¸å‚ä¸ç½‘æ ¼é€‰æ‹©
    return [];
  }

  getDimensions(context) {
    let height = 11; // åŸºæœ¬è¡Œæ•°
    if (context.submitMessage) {
      height += 2; // æ¶ˆæ¯è¡Œ
    }
    return { width: 84, height };
  }
}

module.exports = AutoClearAskPanel;
